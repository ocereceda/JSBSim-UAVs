<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="http://jsbsim.sourceforge.net/JSBSim.xsl"?>
<fdm_config name="GBS_3" version="2.0" release="ALPHA"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://jsbsim.sourceforge.net/JSBSim.xsd">

    <fileheader>
        <author> Oihane Cereceda </author>
        <filecreationdate> 2015-11-11 </filecreationdate>
        <version> v4 </version>
        <description> Giant Big Stik JSBSim model
        v1: Files and values created from Aeromatic v0.82
        v2: Files modified according to more specific data
        v3: Validate model using scripts and plotting data </description>
        v4: Output to FlightGear to visualize the performance
    </fileheader>

    <metrics>
        <wingarea unit="FT2"> 10.538 </wingarea>
        <wingspan unit="FT"> 6.709 </wingspan>
        <wing_incidence> 2.00 </wing_incidence>
        <chord unit="FT"> 1.148 </chord>
        <htailarea unit="FT2"> 1.69 </htailarea>
        <htailarm unit="FT"> 2.36 </htailarm>
        <vtailarea unit="FT2"> 1.05 </vtailarea>
        <vtailarm unit="FT"> 2.27 </vtailarm>
        <location name="AERORP" unit="IN">
            <x> 18.4961 </x>
            <y> 0 </y>
            <z> 2.5591 </z>
        </location>
        <location name="EYEPOINT" unit="IN">
            <x> 7.09 </x>
            <y> 0.0 </y>
            <z> 45.00 </z>
        </location>
        <location name="VRP" unit="IN">
            <x> 0.0 </x>
            <y> 0.0 </y>
            <z> 0.0 </z>
        </location>
    </metrics>

    <mass_balance>
        <ixx unit="SLUG*FT2"> 0.3046 </ixx>
        <iyy unit="SLUG*FT2"> 0.4752 </iyy>
        <izz unit="SLUG*FT2"> 0.7036 </izz>
        <ixy unit="SLUG*FT2"> 0 </ixy>
        <ixz unit="SLUG*FT2"> 0.0951 </ixz>
        <iyz unit="SLUG*FT2"> 0 </iyz>
        <emptywt unit="LBS"> 13 </emptywt>
        <location name="CG" unit="IN">
            <x> 14.4881 </x>
            <y> 0.0 </y>
            <z> 0.0 </z>
        </location>
    </mass_balance>

    <ground_reactions>

      <contact type="BOGEY" name="LEFT_MAIN">
        <location unit="IN">
          <x> 9.8425 </x>
          <y> -10.2362 </y>
          <z> -12.6969 </z>
        </location>
        <static_friction> 0.8 </static_friction>
        <dynamic_friction> 0.9 </dynamic_friction>
        <rolling_friction> 0.02 </rolling_friction>
        <spring_coeff unit="LBS/FT"> 14.99 </spring_coeff>
        <damping_coeff unit="LBS/FT/SEC"> 7.50 </damping_coeff>
        <max_steer unit="DEG"> 0.0 </max_steer>
        <brake_group> NONE </brake_group>
        <retractable>0</retractable>
      </contact>

      <contact type="BOGEY" name="RIGHT_MAIN">
        <location unit="IN">
        <x> 9.8425 </x>
        <y> 10.2362 </y>
        <z> -12.6969 </z>
        </location>
        <static_friction> 0.8 </static_friction>
        <dynamic_friction> 0.9 </dynamic_friction>
        <rolling_friction> 0.02 </rolling_friction>
        <spring_coeff unit="LBS/FT"> 14.99 </spring_coeff>
        <damping_coeff unit="LBS/FT/SEC"> 7.50 </damping_coeff>
        <max_steer unit="DEG"> 0.0 </max_steer>
        <brake_group> NONE </brake_group>
        <retractable>0</retractable>
      </contact>
      
        <contact type="BOGEY" name="NOSE">
            <location unit="IN">
                <x> -52.7559 </x>
                <y> 0 </y>
                <z> 5.0197 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 0.9 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 4.50 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 7.50 </damping_coeff>
            <max_steer unit="DEG"> 10 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>0</retractable>
        </contact>

      <contact type="STRUCTURE" name="LEFT_WING">
        <location unit="IN">
          <x>  18.4961 </x>
          <y>  -40.2559 </y>
          <z>  2.5591 </z>
        </location>
        <static_friction>  1.00 </static_friction>
        <dynamic_friction> 1.00 </dynamic_friction>
        <spring_coeff unit="LBS/FT">         14.99 </spring_coeff>
        <damping_coeff unit="LBS/FT/SEC">    14.99 </damping_coeff>
      </contact>

      <contact type="STRUCTURE" name="RIGHT_WING">
        <location unit="IN">
          <x>  18.4961 </x>
          <y>  40.2559 </y>
          <z>  2.5591 </z>
        </location>
        <static_friction>  1.00 </static_friction>
        <dynamic_friction> 1.00 </dynamic_friction>
        <spring_coeff unit="LBS/FT">         14.99 </spring_coeff>
        <damping_coeff unit="LBS/FT/SEC">    14.99 </damping_coeff>
      </contact>
      
    </ground_reactions>

  <propulsion>
    <engine file="Zenoah_G-26A">
      <location unit="IN">
        <x> -2.5984 </x>
        <y> -0.2244 </y>
        <z> -0.2244 </z>
      </location>
      <orient unit="DEG">
        <roll> 0.0 </roll>
        <pitch> 0 </pitch>
        <yaw> 0 </yaw>
      </orient>
      <feed>0</feed>
      <thruster file="propGBS_3">
        <location unit="IN">
          <x> -5.4724 </x>
          <y> -0.4724 </y>
          <z> -0.4724 </z>
        </location>
        <orient unit="DEG">
          <roll> 0.0 </roll>
          <pitch> 0.0 </pitch>
          <yaw> 0.0 </yaw>
        </orient>
        <sense> 1 </sense>
      </thruster>
    </engine>
    <tank type="FUEL">
      <!-- Tank number 0 -->
      <location unit="IN">
        <x> 4.7244 </x>
        <y> 0 </y>
        <z> 0 </z>
      </location>
      <capacity unit="LBS"> 1.1 </capacity>
      <contents unit="LBS"> 0.55 </contents>
    </tank>

    </propulsion>

<system file="GNCUtilities_TEST"/>
<autopilot file="GBSap"/>
  <flight_control name="FCS: unnamed">

    <channel name="Pitch">

      <summer name="Pitch Trim Sum">
	  <input>ap/elevator_cmd</input>
        <input>fcs/elevator-cmd-norm</input>
        <input>fcs/pitch-trim-cmd-norm</input>
        <clipto>
          <min> -1 </min>
          <max>  1 </max>
        </clipto>
      </summer>

      <aerosurface_scale name="Elevator Control">
        <input>fcs/pitch-trim-sum</input>
        <gain>1.0</gain>
        <range>
          <min> -1 </min>
          <max>  1 </max>
        </range>
        <output>fcs/elevator-pos-rad</output>
      </aerosurface_scale>

      <aerosurface_scale name="elevator normalization">
        <input>fcs/elevator-pos-rad</input>
        <domain>
          <min> -1 </min>
          <max>  1 </max>
        </domain>
        <range>
          <min> -1 </min>
          <max>  1 </max>
        </range>
        <output>fcs/elevator-pos-norm</output>
      </aerosurface_scale>

    </channel>

    <channel name="Roll">

      <summer name="Roll Trim Sum">
        <input>ap/aileron_cmd</input>
		<input>fcs/aileron-cmd-norm</input>
        <input>fcs/roll-trim-cmd-norm</input>
        <clipto>
          <min> -1 </min>
          <max>  1 </max>
        </clipto>
      </summer>

      <aerosurface_scale name="Left Aileron Control">
        <input>fcs/roll-trim-sum</input>
        <gain>1.0</gain>
        <range>
          <min> -1 </min>
          <max>  1 </max>
        </range>
        <output>fcs/left-aileron-pos-rad</output>
      </aerosurface_scale>
	  
      <aerosurface_scale name="left aileron normalization">
        <input>fcs/left-aileron-pos-rad</input>
		<domain>
          <min> -1 </min>
          <max>  1 </max>
        </domain>
        <range>
          <min> -1 </min>
          <max>  1 </max>
        </range>
        <output>fcs/left-aileron-pos-norm</output>
      </aerosurface_scale>
      
      <aerosurface_scale name="Right Aileron Control">
        <input>fcs/roll-trim-sum</input>
        <gain>1.0</gain>
        <range>
          <min> -1 </min>
          <max>  1 </max>
        </range>
        <output>fcs/right-aileron-pos-rad</output>
      </aerosurface_scale>

      <aerosurface_scale name="right aileron normalization">
        <input>fcs/right-aileron-pos-rad</input>
        <domain>
          <min> -1 </min>
          <max>  1 </max>
        </domain>
        <range>
          <min> -1 </min>
          <max> 1 </max>
        </range>
        <output>fcs/right-aileron-pos-norm</output>
      </aerosurface_scale>

    </channel>

    <channel name="Yaw">

      <summer name="Rudder Command Sum">
        <input>fcs/rudder-cmd-norm</input>
        <input>fcs/yaw-trim-cmd-norm</input>
        <clipto>
          <min> -1 </min>
          <max>  1 </max>
        </clipto>
      </summer>

      <aerosurface_scale name="Rudder Control">
        <input>fcs/rudder-command-sum</input>
        <gain>1.0</gain>
        <range>
          <min> -1 </min>
          <max>  1 </max>
        </range>
        <output>fcs/rudder-pos-rad</output>
      </aerosurface_scale>

      <aerosurface_scale name="rudder normalization">
        <input>fcs/rudder-pos-rad</input>
        <domain>
          <min> -1 </min>
          <max>  1 </max>
        </domain>
        <range>
          <min> -1 </min>
          <max>  1 </max>
        </range>
        <output>fcs/rudder-pos-norm</output>
      </aerosurface_scale>

    </channel>
    
    <channel name="Landing Gear">
    </channel>

  </flight_control>


  <aerodynamics>
    
    <axis name="LIFT">
      <function name="aero/coefficient/CLwbh"> <!-- Lift_due_to_alpha -->
        <description>Lift_due_to_alpha</description>
        <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>aero/alpha-rad</property>
          <value>5.32</value>
        </product>
      </function>
	  
	  <function name="aero/coefficient/CLadot"> <!-- Lift_due_to_alpha_rate -->
        <description>Lift_due_to_alpha_rate</description>
        <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>aero/alphadot-rad_sec</property>
          <property>aero/ci2vel</property>
          <value>1.7</value>
        </product>
      </function>

	  <function name="aero/coefficient/CLq"> <!-- Lift_due_to_pitch_rate -->
        <description>Lift_due_to_pitch_rate</description>
        <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>velocities/q-aero-rad_sec</property>
          <property>aero/ci2vel</property>
          <value>3.9</value>
        </product>
      </function>
	  
      <function name="aero/coefficient/CLDe"> <!-- Lift_due_to_Elevator_Deflection -->
        <description>Lift_due_to_Elevator_Deflection</description>
        <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>fcs/elevator-pos-rad</property>
          <value>-5.6</value>
        </product>
      </function>
    </axis>
    
        <axis name="DRAG">
            <function name="aero/coefficient/CDo">
                <description>Drag_at_zero_lift</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <value>0.1</value>
                </product>
            </function>

          <function name="aero/force/Drag_induced">
            <description>Induced drag</description>
            <product>
              <property>aero/qbar-psf</property>
              <property>metrics/Sw-sqft</property>
              <property>aero/cl-squared</property>
              <value>0.0877</value>
            </product>
          </function>
          
                   
            <function name="aero/coefficient/CDDe">
                <description>Drag_due_to_Elevator_Deflection</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/elevator-pos-rad</property>
                    <value>0.0135</value>
                </product>
            </function>

          <function name="aero/coefficient/CDDa">
            <description>Drag_due_to_Aileron_Deflection</description>
            <product>
              <property>aero/qbar-psf</property>
              <property>metrics/Sw-sqft</property>
              <property>fcs/left-aileron-pos-rad</property>
              <value>0.0302</value>
            </product>
          </function>

          <function name="aero/coefficient/CDDa">
            <description>Drag_due_to_Rudder_Deflection</description>
            <product>
              <property>aero/qbar-psf</property>
              <property>metrics/Sw-sqft</property>
              <property>fcs/rudder-pos-rad</property>
              <value>0.0303</value>
            </product>
          </function>          
          
          
        </axis>

        <axis name="SIDE">
            <function name="aero/coefficient/CYb">
                <description>Side_force_due_to_beta</description>
                <product>                  
                  <property>aero/qbar-psf</property>
                  <property>metrics/Sw-sqft</property>
                  <property>aero/beta-rad</property>
                  <value>-0.83</value>
                </product>
            </function>
          
            <function name="aero/coefficient/CYda">
                <description>Side_force_due_to_aileron</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/left-aileron-pos-rad</property>
                    <value>-0.075</value>
                </product>
            </function>
          
            <function name="aero/coefficient/CYdr">
                <description>Side_force_due_to_rudder</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/rudder-pos-rad</property>
                    <value>0.1914</value>
                </product>
            </function>
          
        </axis>       

        <axis name="ROLL">
            <function name="aero/coefficient/Clb">
                <description>Roll_moment_due_to_beta</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                  <property>aero/beta-rad</property>
                  <value>-0.034</value>
                </product>
            </function>
          
            <function name="aero/coefficient/Clp">
                <description>Roll_moment_due_to_roll_rate_(roll_damping)</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/p-aero-rad_sec</property>
                    <value>-0.41</value>
                </product>
            </function>
          
            <function name="aero/coefficient/Clr">
                <description>Roll_moment_due_to_yaw_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/r-aero-rad_sec</property>
                  <value>0.107</value>
                </product>
            </function>
          
            <function name="aero/coefficient/ClDa">
                <description>Roll_moment_due_to_aileron</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>fcs/left-aileron-pos-rad</property>
                    <value>-0.2</value>
                </product>
            </function>
          
            <function name="aero/coefficient/Cldr">
                <description>Roll_moment_due_to_rudder</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>fcs/rudder-pos-rad</property>
                    <value>-0.107</value>
                </product>
            </function>
        </axis>

        <axis name="PITCH">
            <function name="aero/coefficient/Cmo">
                <description>Pitching_moment_at_zero_alpha</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <value>0.15</value>
                </product>
            </function>
          
            <function name="aero/coefficient/Cmalpha">
                <description>Pitch_moment_due_to_alpha</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>aero/alpha-rad</property>
                    <value>-1.9</value>
                </product>
            </function>
          
          <function name="aero/coefficient/Cmde">
            <description>Pitch_moment_due_to_elevator_deflection</description>
            <product>
              <property>aero/qbar-psf</property>
              <property>metrics/Sw-sqft</property>
              <property>metrics/cbarw-ft</property>
              <property>fcs/elevator-pos-rad</property>
              <value>-1.458</value>
            </product>
          </function>
           
            <function name="aero/coefficient/Cmq">
                <description>Pitch_moment_due_to_pitch_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>aero/ci2vel</property>
                    <property>velocities/q-aero-rad_sec</property>
                    <value>-6.813</value>
                </product>
            </function>
          
            <function name="aero/coefficient/Cmadot">
                <description>Pitch_moment_due_to_alpha_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>aero/ci2vel</property>
                    <property>aero/alphadot-rad_sec</property>
                    <value>-3.5</value>
                </product>
            </function>
           
        </axis>

        <axis name="YAW">
            <function name="aero/coefficient/Cnb">
                <description>Yaw_moment_due_to_beta</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                  <property>aero/beta-rad</property>
                  <value>0.071</value>
                </product>
            </function>

          <function name="aero/coefficient/Cnr">
            <description>Yaw_moment_due_to_yaw_rate</description>
            <product>
              <property>aero/qbar-psf</property>
              <property>metrics/Sw-sqft</property>
              <property>metrics/bw-ft</property>
              <property>aero/bi2vel</property>
              <property>velocities/r-aero-rad_sec</property>
              <value>-0.12032</value>
            </product>
          </function>

          <function name="aero/coefficient/Cndr">
            <description>Yaw_moment_due_to_rudder</description>
            <product>
              <property>aero/qbar-psf</property>
              <property>metrics/Sw-sqft</property>
              <property>metrics/bw-ft</property>
              <property>fcs/rudder-pos-rad</property>
              <value>-0.062</value>
            </product>
          </function>

          <function name="aero/coefficient/Cnda">
            <description>Yaw_moment_due_to_aileron. Adverse_Yaw</description>
            <product>
              <property>aero/qbar-psf</property>
              <property>metrics/Sw-sqft</property>
              <property>metrics/bw-ft</property>
              <property>fcs/left-aileron-pos-rad</property>
              <value>0.0108</value>
            </product>
          </function>

          <function name="aero/coefficient/Cnp">
                <description>Yaw_moment_due_to_roll_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/p-aero-rad_sec</property>
                    <value>-0.0575</value>
                </product>
            </function>
                    
        </axis>
    </aerodynamics>
  
  <output name ="localhost" type="FLIGHTGEAR" port="5500" protocol="UDP" rate="10"> </output>

  <output name="GBS_3Out.csv" type="CSV" rate="100">

    <simulation>       OFF </simulation>
    <atmosphere>       ON  </atmosphere>
    <massprops>        OFF </massprops>
    <aerosurfaces>     ON  </aerosurfaces>
    <rates>            ON  </rates>
    <velocities>       ON  </velocities>
    <forces>           OFF </forces>
    <moments>          OFF </moments>
    <position>         ON  </position>
    <coefficients>     OFF </coefficients>
    <ground_reactions> OFF </ground_reactions>
    <fcs>              ON  </fcs>
    <propulsion>       ON </propulsion>
	<property> fcs/throttle-cmd-norm </property>
  </output>
  
  
</fdm_config>
